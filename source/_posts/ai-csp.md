---
title: "[MLOps] 멍청한 내 사이드 프로젝트를 Intelligent 하게 만들어보자"
date: 2022-03-06 20:28:59
tags: [MLOps, AI, Cloud]
---

# MOTIVATION

작년 상반기에 구상하여 하반기에 기획 & 개발하고, 연말에 공모전에 냈던 나의 애증의 사이드 프로젝트...
퇴근하고 저녁, 주말에만 개발하느라 시간도 부족했는데 또 발등에 불 떨어질 때까지 미루는 바람에 실제로는 한 달안에 우다다 만들어서
코드도 못생기고 기능도 허접해서 다시 꺼내보고 싶지 않았는데... 요즘 문득 다시 만들어볼까 생각이 들어서 꺼내봤다.

기억과 그대로 소스코드는 지저분했지만 ^\_^, 리소스가 아깝기도 하고 작년 하반기 대비 내 실력이 얼마나 늘었는지도 볼 겸 모바일앱으로 전환을 해보기로 마음먹었다.

그리고 이 꼬질꼬질한 친구를 더 멋드러지게 만들기 위해, 작년에 기획만 하고 우선순위에 밀려 구현되지 못했던 장소 추천 기능을 넣어보려고한다.

이 포스트에서는 어떻게 추천 서비스를 1.구상하고 2.조사하고 3.이해하고 4.구현했는지 정리할 것이다.

# 1. 구상하기

## 1-1. 어떻게 추천하지?

이 부분까지는 작년 기획 단계에서 고민을 했던 것 같다.

사용자 기반의 추천 / 컨텐츠 기반의 추천 크게 두 개의 옵션 사이에서 고민이 있었는데

- 사용자 풀을 방대하게 늘리고 싶은 욕심이 없고
- 소수의 충성스러운 사용자만 있으면 행복하고
- 몇 명만 보물같은 앱이라고 평가해주면 되는

나로서는 컨텐츠 기반의 추천을 선택하는 것이 유리하다고 판단했다.

따라서 일차적으로는 내 컨텐츠의 카테고리를 분류하고, 사용자로부터 선호하는 카테고리를 수집했다.

## 1-2. 어떻게 ✨잘✨ 추천하지?

컨텐츠 기반으로 추천하겠다는 건 작년에 이미 결정되어서 작업되어 있는 내용인데,
이번에 잘 만들어보려고 고심하면서 심화 기능을 생각하자니 뭔가 문제가 좀 있었다.

- 사용자(부모)가 선택한 카테고리가 실제로 자녀의 취향이 아닐수도 있음
- 초기에 선택한 카테고리에 대한 흥미도가 시간이 지남에 따라 변함
  그렇다고 사용자가 스스로 취향이 바뀌었다는 것을 인지하고 -> 정보 설정 화면에 진입해서 -> 카테고리를 다시 고르게 하는 것은 필터 기능이랑 뭐가 다른지 모르겠음
- 제한된 카테고리 내에서 선택을 하다보니 세밀한 취향 선택이 어렵고, 당연히 추천에 대한 만족도도 떨어짐

**결론적으로**, 사용자가 서비스 내에서 어떤 행동을 했는 지 로깅하고, 해당 로그를 활용하여 사용자가 어떤 정보에 흥미를 느끼는지 파악하는 파이프라인을 마련해야할 필요가 있었다.

## 1-3. 어떻게 사용자가 흥미를 느끼는 정보 여부를 판단하지?

행동에 대한 로깅은 어렵지 않겠으나 어떤 행동을 기록할 것인지 즉, 사용자가 흥미를 느끼는 경우 어떤 행동을 하는지 알아내는 것은 좀 더 깊은 고민이 필요할 것 같았다.

인스타 추천알고리즘이나 유튭 추천알고리즘이 어떤 정보를 수집해간다더라 이것저것 들은 이야기는 있지만, 실제로 내부가 어찌 되어있는지 자세히 알 방도도 없을 뿐더러 내 시간과 비용으로 그 정도 구현은 어렵기 때문에 우선은 몇 가지 action에 대한 측정값을 수집하는 정도로만 먼저 데이터를 모아보기로 했다.

의미가 있다고 판단한 action은 주로 조회나 화면과의 상호작용 정도이다. 한 가지 나름 신경썼다고 생각하는 특이점으로는 서비스 자체가 메인 추천화면 -> 장소 상세화면 -> 장소 상세화면의 세부 정보별 상호작용 (장소 내용 자세히보기, 주변관광지 추천, 지도연동 등등)과 같이 안쪽으로 타고 들어와야만 정보의 질이 높아지는 구조로, 유용한 정보를 얻고자 하는 사용자라면 장소상세 화면 안쪽까지 들어와야만 한다는 점에 착안하여 화면 depth에 대한 가중치를 부여하려고 한다.

## 1-4. 어떻게 분류체계를 정할까?

작년 버전의 소스에서는 박물관, 미술관 등의 N가지 카테고리를 대분류로 장소 별 특색에 따라 하위의 분류를 얼추 정해놓았다.

신기하게도 약간의 고민 만으로도 작년 버전의 접근이 잘못되었다는 점을 알 수 있었다. 트리구조의 자세한 분류 체계는 내가 구현하고자 하는 추천 시스템에서 별로 의미가 없었다.

내가 장소의 feature로 고려할 수 있는 항목이 무엇이 있을지 고민하면 되겠다고 판단했고, 내가 타겟이라고 생각했던 유저층의 마음으로 웹서핑을 하며 몇 가지 feature 를 뽑아냈다.
생각보다 꽤 다양한 feature를 추릴 수 있었다. 물론 이 내용도 리서치에 공을 들였기에, 여기에 적기는 아까워서 노트에만 킵했다 🌝

**결론적으로**, 원 질문이었던 "어떻게 분류체계를 정할까?"에 대한 답말고 "어떻게 장소에 대한 feature를 정할까?"에 대한 답을 구하는 시간이었다 :)

# 2. 조사하기

## 2-1. 사용자의 action 이력을 수집하는 방법은 뭐가 있을까?

## 2-2. 사용자의 action 이력과 가중치를 넘기면 이 사용자의 feature 별 관심도를 뽑아주는 서비스나 모델이 뭐가 있을까?

## 2-3. 특정 사용자의 feature 별 관심도를 넘기면 그 사용자에게 추천할만한 데이터를 뽑아주는 서비스나 모델이 뭐가 있을까?
